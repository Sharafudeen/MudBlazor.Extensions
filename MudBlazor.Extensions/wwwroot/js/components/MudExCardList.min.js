export function initializeMudExCardList(t,i,r){return new n(t,i,r)}class n{_cardCls=["mud-ex-card","mud-ex-animate-all-properties"];constructor(n,t,i){this.elementRef=n;this.options=i;this._raf=null;this._lastEvent=null;this._observer=null;this._mutationObserver=null;this._visibleCards=new Set;this._boundOnPointerMove=this._onPointerMove.bind(this);this._boundOnPointerOut=this._onPointerOut.bind(this);this.initialize(i)}_cardIsRelevant(n){return n.getAttribute("data-intersecting")!=="false"}_addItemClsIf(n,t){if(n&&(n.classList.contains("mud-ex-card-parent")&&this._addItemClsIf(n.querySelector("*"),t),!n.classList.contains("skip-card-check"))){const i=Array.from(t).flatMap(n=>n.split(" ")).filter(n=>n);i.forEach(t=>{n.classList.contains(t)||n.classList.add(t)})}}initialize(n){if(this.elementRef&&(this.options=n,this._container=this.elementRef.querySelector(".mud-ex-cards"),this._container)){const t=Array.from(this._container.children);t.forEach(n=>{this._addItemClsIf(n,this._cardCls)});this._observer=new IntersectionObserver(n=>{n.forEach(n=>{n.target.dataset.intersecting=n.isIntersecting,n.isIntersecting?this._visibleCards.add(n.target):this._visibleCards.delete(n.target)})},{threshold:.1});t.forEach(n=>this._observer.observe(n));this._mutationObserver=new MutationObserver(n=>{n.forEach(n=>{n.addedNodes.forEach(n=>{n.nodeType===1&&n.classList.contains("mud-ex-card")&&(this._addItemClsIf(n,this._cardCls),this._observer.observe(n))})})});this._mutationObserver.observe(this._container,{childList:!0});this._container.addEventListener("pointermove",this._boundOnPointerMove);this._container.addEventListener("pointerout",this._boundOnPointerOut)}}_onPointerMove(n){this._raf&&cancelAnimationFrame(this._raf);this._lastEvent=n;this._raf=requestAnimationFrame(()=>{this._handlePointerMove(this._lastEvent)})}_handlePointerMove(n){if(this._visibleCards.forEach(t=>{const i=t.getBoundingClientRect(),r=n.clientX-i.left,u=n.clientY-i.top;t.style.setProperty("--mouse-x",`${r}px`);t.style.setProperty("--mouse-y",`${u}px`)}),this.options&&this.options.use3dEffect){const t=n.target.closest(".mud-ex-card");t&&this._cardIsRelevant(t)&&this.cardMouseMove(t,n)}}_onPointerOut(n){const t=n.target.closest(".mud-ex-card");t&&(t.style.boxShadow="",t.style.transform="")}cardMouseMove(n,t){if(this.options&&this.options.use3dEffect){const i=n.getBoundingClientRect(),f=t.clientX-i.left,e=t.clientY-i.top,o=i.width,s=i.height,r=f-o/2,u=e-s/2,h=Math.sqrt(r**2+u**2),c=`${-r/5}px ${-u/10}px 10px rgba(0, 0, 0, 0.2)`,l=`rotate3d(${-u/100}, ${r/100}, 0, ${h/8}deg)`;n.style.boxShadow=c;n.style.transform=l}}dispose(){this._container&&(this._container.removeEventListener("pointermove",this._boundOnPointerMove),this._container.removeEventListener("pointerout",this._boundOnPointerOut));this._observer&&this._observer.disconnect();this._mutationObserver&&this._mutationObserver.disconnect();this._raf&&cancelAnimationFrame(this._raf)}}window.MudExCardList=n;